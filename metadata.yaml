# This file populates the Overview on Charmhub.
# See https://juju.is/docs/sdk/metadata-reference for a checklist and guidance.

# The charm package name, no spaces (required)
# See https://juju.is/docs/sdk/naming#heading--naming-charms for guidance.
name: juju-machine-exporter
 
# The following metadata are human-readable and will be published prominently on Charmhub.

display-name: Juju machine exporter

summary: Charm that exports statistics about number of juju-deployed machines

description: |
  This charm exposes a `/metrics` endpoint for Prometheus that provides statistics
  about machines deployed by juju controller. It connects to configured juju controller
  and collects information about machines from every model.

  The metrics provide information about machines' states (UP or DOWN) and can be used
  to calculate how many machines are managed by juju controller and in which state they
  are. For more detailed information about exposed metrics and their format see
  juju-machine-exporter snap documentation

  TODO: include link to snap

subordinate: True

resources:
  exporter-snap:
    type: file
    description: |
      (Optional) Snap that implements actual data collection and export. If not provided, charm
      will try to download juju-machine-exporter from snap store.
    filename: juju-machine-exporter.snap

provides:
  prometheus-scrape:
    interface: prometheus

requires:
  general-info:
    interface: juju-info
    scope: container
